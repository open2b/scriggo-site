<!doctype html>
<html lang="en" class="article">
<head>
    <meta charset="utf-8">
    <title>Scriggo command</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
<nav class="top">
    <a class="logo" href="/">Scriggo</a>
    <ul>
        <li><a href="/news">News</a></li>
        <li><a href="/what-is-scriggo">Documentation</a></li>
        <li><a href="/support">Support</a></li>
        <li><a href="/use-cases">Use Cases</a></li>
        <li><a href="https://play.scriggo.com/" target="_blank" class="playground">Playground</a></li>
    </ul>
</nav><article>
    <div class="wrap">
        <aside>
            <nav>
            <ul>
                <li><a href="what-is-scriggo">What is Scriggo</a></li>
                <li><a href="get-started">Get Started</a></li>
                <li><a href="install">Install Scriggo</a></li>
                <li><a href="scriggo-command">Scriggo command</a></li>
                <li><a href="template">Template</a></li>
                <li><a href="scriggofile">Scriggofile</a></li>
                <li><a href="internals">Internals</a></li>
                <li><a href="disassembler">Disassembler</a></li>
                <li><a href="template-spec">Template spec</a></li>
                <li><a href="limitations">Limitations</a></li>
            </ul>
            </nav>
        </aside>
        <div class="content">
            <h1 id="scriggo-command">Scriggo command</h1>
<p>Scriggo has a command line interface, the <code>scriggo</code> command, that allows to:</p>
<ul>
<li>serve templates with support for Markdown</li>
<li>initialize an interpreter for Go programs</li>
<li>generate the code for package importers</li>
</ul>
<p>Se how to <a href="/install">install the scriggo command</a>.</p>
<h3 id="get-help-from-command-line">Get help from command line</h3>
<p>To get help from the command line run the following command:</p>
<pre><code>$ scriggo help
</code></pre>
<h2 id="serve-a-template">Serve a template</h2>
<p>The Scriggo Serve command runs a web server and serves the template rooted at the current directory.
All Scriggo builtins are available in template files. It is useful to learn Scriggo templates.</p>
<p>The basic Serve command takes this form:</p>
<pre><code>$ scriggo serve
</code></pre>
<p>It renders HTML and Markdown files based on file extension.</p>
<p>For example, serving this request:</p>
<pre><code>http://localhost:8080/article
</code></pre>
<p>it renders the file &quot;article.html&quot; as HTML if exists, otherwise renders the file &quot;article.md&quot; as Markdown.</p>
<p>Serving a URL terminating with a slash:</p>
<pre><code>http://localhost:8080/blog/
</code></pre>
<p>it renders &quot;blog/index.html&quot; or &quot;blog/index.md&quot;.</p>
<p>Markdown is converted to HTML with the <a href="https://github.com/yuin/goldmark">Goldmark</a> parser with the options
<code>html.WithUnsafe</code> and <code>parser.WithAutoHeadingID</code>.</p>
<p>Templates are automatically rebuilt when a file changes.</p>
<h3 id="complete-syntax">Complete syntax</h3>
<p>The complete <code>scriggo serve</code> command takes this form:</p>
<pre><code>$ scriggo serve [-S n] [--metrics] 
</code></pre>
<p>The <code>-S</code> flag prints the assembly code of the served file and n determines the maximum length, in runes, of
disassembled <code>Text</code> instructions</p>
<pre><code>n &gt; 0: at most n runes; leading and trailing white space are removed
n == 0: no text
n &lt; 0: all text
</code></pre>
<p>The <code>--metrics</code> flags prints metrics about execution time.</p>
<h2 id="initialize-an-interpreter">Initialize an interpreter</h2>
<p>The Scriggo Init command initializes an interpreter for Go programs. It creates the following files:</p>
<ul>
<li>go.mod</li>
<li>go.sum</li>
<li>main.go</li>
<li>packages.go</li>
<li>Scriggofile</li>
</ul>
<p>The syntax is:</p>
<pre><code>$ scriggo init [dir]
</code></pre>
<p>where <code>dir</code> is the directory in which to create the files. If no argument is given, <code>scriggo init</code> uses the current directory.
If the directory already contains &quot;.go&quot; files or a &quot;vendor&quot; directory, the command fails.</p>
<p>If the directory contains a Scriggofile called <code>Scriggofile</code>, the command reads it for the instructions, otherwise creates
a Scriggofile with the instruction to create an importer for the Go standard library.</p>
<p>If the directory does not contain a <code>go.mod</code> file, the command creates it and as module path uses the directory name.</p>
<h2 id="generate-a-package-importer">Generate a package importer</h2>
<p>The Scriggo Import command generate the code for a package importer. An importer is used by Scriggo to import a package
when an &quot;import&quot; statement is executed.</p>
<p>The code for the importer is generated from the instructions in a Scriggofile. The Scriggofile should be in a Go module.</p>
<p>The basic Import command takes this form:</p>
<pre><code>$ scriggo import [-o output]
</code></pre>
<p>For example:</p>
<pre><code>$ scriggo import -o packages.go
</code></pre>
<p>generates the code for an importer, with instructions in a Scriggofile called &quot;Scriggofile&quot; in the current directory
and writes it into the file &quot;packages.go&quot;.</p>
<h3 id="complete-syntax-1">Complete syntax</h3>
<p>The complete <code>scriggo import</code> command takes this form:</p>
<pre><code>$ scriggo import [-f Scriggofile] [-v] [-x] [-o output] [module]
</code></pre>
<p>If an argument is given, it must be a local rooted path or must begin with a <code>.</code> or <code>..</code> element and it must be a module
root directory. Import looks for a Scriggofile named &quot;Scriggofile&quot; in that directory.</p>
<p>If no argument is given, the action applies to the current directory.</p>
<p>The <code>-f</code> flag forces import to read the given Scriggofile instead of the Scriggofile of the module.</p>
<p>The importer in the generated Go file have type <code>native.Importer</code> and it is assigned to a variable named &quot;packages&quot;.
The variable can be used as an argument to the <code>Build</code> and <code>BuildTemplate</code> functions in the <code>scriggo</code> package.</p>
<p>To give a different name to the variable use the instruction <code>SET VARIABLE</code> in the Scriggofile:</p>
<pre><code>SET VARIABLE foo
</code></pre>
<p>The package name in the generated Go file is by default &quot;main&quot;, to give a different name to the package use the
instruction <code>SET PACKAGE</code> in the Scriggofile:</p>
<pre><code>SET PACKAGE boo
</code></pre>
<p>The <code>-v</code> flag prints the imported packages as defined in the Scriggofile.</p>
<p>The <code>-x</code> flag prints the executed commands.</p>
<p>The <code>-o</code> flag writes the generated Go file to the named output file, instead to the standard output.</p>

        </div>
    </div>
</article>
<footer>
    &copy; 2021 Open2b
</footer>
</body>
</html>